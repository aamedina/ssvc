@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix spdx-build: <https://spdx.org/rdf/v3/Build/> .
@prefix spdx-core: <https://spdx.org/rdf/v3/Core/> .
@prefix vs: <http://www.w3.org/2003/06/sw-vocab-status/ns#> .

spdx-build:Build a owl:Class, sh:NodeShape ;
  rdfs:comment """A build is a representation of the process in which a piece of software or artifact is built. It encapsulates information related to a build process and
provides an element from which relationships can be created to describe the build's inputs, outputs, and related entities (e.g. builders, identities, etc.).

Definitions of "BuildType", "ConfigSource", "Parameters" and "Environment" follow
those defined in [SLSA provenance](https://slsa.dev/provenance/v0.2).

ExternalIdentifier of type "urlScheme" may be used to identify build logs. In this case, the comment of the ExternalIdentifier should be "LogReference".

Note that buildStart and buildEnd are optional, and may be omitted to simplify creating reproducible builds.""" ;
  rdfs:subClassOf spdx-core:Element ;
  sh:property [
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
    sh:name "buildId" ;
    sh:path spdx-build:buildId ;
  ] ;
  sh:property [
    sh:datatype spdx-core:DateTime ;
    sh:maxCount 1 ;
    sh:name "buildStartTime" ;
    sh:path spdx-build:buildStartTime ;
  ] ;
  sh:property [
    sh:datatype spdx-core:DateTime ;
    sh:maxCount 1 ;
    sh:name "buildEndTime" ;
    sh:path spdx-build:buildEndTime ;
  ] ;
  sh:property [
    sh:datatype xsd:anyURI ;
    sh:name "configSourceUri" ;
    sh:path spdx-build:configSourceUri ;
  ] ;
  sh:property [
    sh:class spdx-core:DictionaryEntry ;
    sh:name "environment" ;
    sh:path spdx-build:environment ;
  ] ;
  sh:property [
    sh:class spdx-core:Hash ;
    sh:name "configSourceDigest" ;
    sh:path spdx-build:configSourceDigest ;
  ] ;
  sh:property [
    sh:datatype xsd:string ;
    sh:name "configSourceEntrypoint" ;
    sh:path spdx-build:configSourceEntrypoint ;
  ] ;
  sh:property [
    sh:class spdx-core:DictionaryEntry ;
    sh:name "parameters" ;
    sh:path spdx-build:parameters ;
  ] ;
  sh:property [
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 ;
    sh:minCount 1 ;
    sh:name "buildType" ;
    sh:path spdx-build:buildType ;
  ] ;
  vs:term_status "Stable" .

spdx-build:configSourceDigest a owl:ObjectProperty ;
  rdfs:comment "configSourceDigest is the checksum of the build configuration file used by a builder to execute a build. This Property uses the Core model's [Hash](../../Core/Classes/Hash.md) class." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range spdx-core:Hash ;
  vs:term_status "Stable" .

spdx-build:environment a owl:ObjectProperty ;
  rdfs:comment "environment is a map of environment variables and values that are set during a build session. This is different from the [parameters](parameters.md) property in that it describes the environment variables set before a build is invoked rather than the variables provided to the builder." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range spdx-core:DictionaryEntry ;
  vs:term_status "Stable" .

spdx-build:parameters a owl:ObjectProperty ;
  rdfs:comment "parameters is a key-value map of all build parameters and their values that were provided to the builder for a build instance. This is different from the [environment](environment.md) property in that the keys and values are provided as command line arguments or a configuration file to the builder." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range spdx-core:DictionaryEntry ;
  vs:term_status "Stable" .

spdx-build:buildEndTime a owl:DatatypeProperty ;
  rdfs:comment "buildEndTime describes the time at which a build stops or finishes. This value is typically recorded by the builder." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range spdx-core:DateTime ;
  vs:term_status "Stable" .

spdx-build:buildId a owl:DatatypeProperty ;
  rdfs:comment "A buildId is a locally unique identifier to identify a unique instance of a build. This identifier differs based on build toolchain, platform, or naming convention used by an organization or standard." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range xsd:string ;
  vs:term_status "Stable" .

spdx-build:buildStartTime a owl:DatatypeProperty ;
  rdfs:comment "buildStartTime is the time at which a build is triggered. The builder typically records this value." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range spdx-core:DateTime ;
  vs:term_status "Stable" .

spdx-build:buildType a owl:DatatypeProperty ;
  rdfs:comment "A buildType is a URI expressing the toolchain, platform, or infrastructure that the build was invoked on. For example, if the build was invoked on GitHub's CI platform using github actions, the buildType can be expressed as `https://github.com/actions`. In contrast, if the build was invoked on a local machine, the buildType can be expressed as `file://username@host/path/to/build`." ;
  rdfs:domain spdx-build:Build ;
  rdfs:range xsd:anyURI ;
  vs:term_status "Stable" .

spdx-build:configSourceEntrypoint a owl:DatatypeProperty ;
  rdfs:comment """A build entrypoint is the invoked executable of a build which always runs when the build is triggered. For example, when a build is triggered by running a shell script, the entrypoint is `script.sh`. In terms of a declared build, the entrypoint is the position in a configuration file or a build declaration which is always run when the build is triggered. For example, in the following configuration file, the entrypoint of the build is `publish`.

```
name: Publish packages to PyPI

on:
create:
tags: "*"

jobs:
publish:
runs-on: ubuntu-latest
if: startsWith(github.ref, 'refs/tags/')
steps:

...
```""" ;
  rdfs:domain spdx-build:Build ;
  rdfs:range xsd:string ;
  vs:term_status "Stable" .

spdx-build:configSourceUri a owl:DatatypeProperty ;
  rdfs:comment """If a build configuration exists for the toolchain or platform performing the build, the configSourceUri of a build is the URI of that build configuration. For example, a build triggered by a GitHub action is defined by a build configuration YAML file. In this case, the configSourceUri is the URL of that YAML file. 
m""" ;
  rdfs:domain spdx-build:Build ;
  rdfs:range xsd:anyURI ;
  vs:term_status "Stable" .


